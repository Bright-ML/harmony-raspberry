Ubuntu环境搭建完成之后开始下载源代码。

# 1、配置GIT

```
sudo apt install git
git config --global user.name "liangzili"
git config --global user.email "liangzili@qq.com"
git config --global credential.helper store
```

# 2、安装码云repo工具，可以执行如下命令

```
sudo apt install curl
curl https://gitee.com/oschina/repo/raw/fork_flow/repo-py3 > /usr/local/bin/repo
chmod a+x /usr/local/bin/repo       #设置repo文件 a+x就是全部用户可执行
pip install -i https://pypi.tuna.tsinghua.edu.cn/simple requests
```

# 3、下载源码

- repo是下载多个git库的python脚本，参考repo用法：https://blog.csdn.net/nwpushuai/article/details/78778602

  #### repo init

- **-u**	#指定manifests这个远程git库的URL，manifests库是整个项目的清单，通常包含了default.xml这个文件

- **-b**	#指定manifest.xml文件中的一个版本，，也就是俗称的“分支”运行该命令后，会在当前目录下新建一个.repo子目录

  #### repo sync

- **-j12** #开启多线程同步操作，这会加快sync命令的执行速度。默认情况下，使用4个线程并发进行sync

- **–no-repo-verify**：在下载repo库时，会对repo的源码进行检查。通过–repo-url指定第三方repo库时，可能会导致检查不通过，所以可以配套使用该参数，强制不进行检查

- **-c, –current-branch**：只同步指定的远程分支。默认情况下，sync会同步所有的远程分支，当远程分支比较多的时候，下载的代码量就大。使用该参数，可以缩减下载时间，节省本地磁盘空间

- **-d, –detach**：脱离当前的本地分支，切换到manifest.xml中设定的分支。在实际操作中，这个参数很有用，当我们第一次sync完代码后，往往会切换到dev分支进行开发。如果不带该参数使用sync， 则会触发本地的dev分支与manifest设定的远程分支进行合并，这会很可能会导致sync失败

- sync -c			#只同步指定的远程分支

```
repo init -u https://gitee.com/openharmony/manifest.git -b master --no-repo-verify
repo sync -c  #以后每天同步远程仓的修改，只需要执行这一条命令即可

前期可以先锁定OpenHarmony-1.0版本，避免频繁升级带来的问题,树莓派的移植就是在OpenHarmony-1.0的分支上进行的 
repo init -u https://gitee.com/openharmony/manifest.git -b OpenHarmony-1.0
repo sync -c -j12
```

# 4、编译测试

可以先执行官方编译命令测试下编译环境是否正常，编译完成后，主目录下会生成out的文件夹

- -b debug 构建调试版本，如果没有这个参数，正常版本是无法进入shell的

```
python3 build.py ipcamera_hi3516dv300 -b debug
python3 build.py ipcamera_hi3518ev300 -b debug
python build.py wifiiot -b debug
```